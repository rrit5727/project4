{% extends 'base.html' %}

{% block content %}
<h2>Consensus picks</h4>

<div class="col s6">
    <form action="{% url 'filter_results' %}" method="POST">
        {% csrf_token %}
        <label for="genre">Select genre</label>
        <select name="genre" id="genre">
            <option value="" disabled selected>Choose your genre</option>
            {% for genre in genres %}
            <option value="{{ genre }}">{{ genre }}</option>
            {% endfor %}
        </select>
        <input type="submit" class="btn" value="filter by genre">
    </form>
</div>

<div class="row">
    <div class="col s6">
        <table>
            <thead>
                <tr><th>Song</th><th>Artist</th><th>Votes</th></tr>
            </thead>
            <tbody>
                {% for song in songs %}
                <tr>
                    <td>{{ song.song_name }}</td>
                    <td>{{ song.artist.artist_name }}</td>
                    <td>{{ song.occurence }}</td>
                    <td>{{ song.artist.genre }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>    



{% endblock %}

{% block javascript %}
<script>
  document.addEventListener('DOMContentLoaded', function() {
    var elems = document.querySelectorAll('select');
    var instances = M.FormSelect.init(elems);
  });
</script>
{% endblock %}